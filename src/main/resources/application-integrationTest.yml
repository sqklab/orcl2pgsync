server:
  port: 9000

keycloak:
  realm: datasync
  auth-server-url: https://keycloakd.releng.ciptv.uplus.co.kr/auth/
  ssl-required: none
  resource: stp_datasync
  use-resource-role-mappings: false
  bearer-only: true
  credentials:
    secret: peF4k0oeeceehrnaUCF1fVZjjY2qWAf7

spring:
  # TRUE to use authentication by KeyCloak - FALSE to use authentication by JWT
  keycloak-enabled: FALSE
  kafka:
    base-url: https://localhost:8080/
    connector:
      base-url: http://localhost:8083/
      postgres:
        base-url: http://localhost:8083/
    bootstrap-servers: kafka1:9092,kafka2:9093
    healthcheck-delay: 10000 # Milliseconds
    notify:
      bootstrap-servers: kafka1:9092,kafka2:9093
    groupId: dbsync
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB
  thymeleaf: # Thymeleaf
    cache: false
    mode: HTML
    encoding: UTF-8
    prefix: file:src/main/resources/templates/
  # JPA properties
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false
    database: postgresql
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    open-in-view: false
    generate-ddl: false
    properties:
      hibernate:
        show_sql: false
        temp:
          use_jdbc_metadata_defaults: false

  # Database
  datasource:
    url: jdbc:postgresql://localhost:5432/dbsync?createDatabaseIfNotExist=true
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  flyway:
    url: jdbc:postgresql://localhost:5432/dbsync?createDatabaseIfNotExist=true
    user: postgres
    password: postgres
    baselineOnMigrate: true
    # To disable flyway in a certain spring profile
    enabled: true
  mvc:
    async:
      request-timeout: -1

logging:
  exception-conversion-word: '%wEx'
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS, Asia/Seoul} %-10level [%L] [%.-24thread] %logger{50} %ex{30} - %msg%n'
  level:
    root: INFO
    org.hibernate.SQL: ERROR
    type.descriptor.sql.BasicBinder: DEBUG
    com.lguplus.fleta.domain.service.convertor: DEBUG
    com.lguplus.fleta.domain.service.comparison: DEBUG
    web: INFO
  file:
    path: logs
  logback:
    rollingpolicy:
      max-history: 10
      max-file-size: 10MB
      total-size-cap: 200MB # maximum log size
app:
  slack:
    token: xoxb-424586110839-2714786268081-UI0figNUiniZ8B2HBieAL8m2
    comparison-notify-channel: dbsync-test
    mention: <!here>
  comparison-worker:
    pool-size: 10 # number of thread to do comparison tasks
    step-time: 5 #ignore x minutes recently compared row
    compare-batch-size: 200 # number of comparison info rows got each time add to thread pool
  email-worker:
    pool-size: 5
  error-keep-time: 10
  resolver-schedule:
    delay: 180000 # milliseconds (3 minutes)
  analysis-schedule:
    delay: 2 0 * * * * # cron expression (at minute 0 and second 5 of every hour)
  get-offset-schedule:
    delay: 2 0/5 * * * ? # cron expression (every 5 minute)
  save-message-schedule:
    delay: 300000 # milliseconds (5 minutes)
  executor:
    retry: 1 # retry time in case database connection lost
    delay: 3000 # delay time between each retry
  import:
    domain: Oracle2Postgres,Postgres2Postgres,Postgres2Oracle
    read-model: Custom
  security:
    authentication:
      jwt:
        # This token must be encoded using Base64 and be at least 256 bits long (you can type `openssl rand -base64 64` on your command line to generate a 512 bits one)
        # As this is the PRODUCTION configuration, you MUST change the default key, and store it securely:
        base64-secret: NDQ0YThhY2QwYmQ2NTg1ZWZkZjAxMDM1ZTZkYWMzMmQzZTc4NTNmNDVhN2I1YWI5N2U2OGE4MmEwNDE2NmJjODJlNzI0NjcyNTI4OWUwMDE0ZjNlZjZiNmJmZWU2NWVlNzcyYjAzZTBkYTgwMjE1MWM1YmNiZGNiOTY2MmU2MDM=
        # Token is valid 24 hours
        token-validity-in-seconds: 86400
        token-validity-in-seconds-for-remember-me: 2592000
  default-user:
    username: admin
    password: admin123

aws:
  region: ap-northeast-2
  endpoint-url: http://localhost:4566
  secrets-manager-id: secrets-local-iptv-local-datasync-credentials

springdoc:
  api-docs:
    enabled: false

debezium:
  version: 1.9.7.Final

comparison:
  thread: 3 # N
  queue-capacity: 1000
  retry:
    wait-interval-each-seconds: 5 # L
    count: 3 # J
    condition:
      difference:
        max: 1000 # K
    message:
      limit: 20