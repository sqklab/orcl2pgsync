<nav aria-label="breadcrumb" class="border-bottom shadow-sm bg-white p-3">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a href="#">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Datasource management</li>
  </ol>
</nav>

<div class="content m-3">
  <div class="card card-body">
    <div class="toolbar">
        <div class="left">
            <button type="button" class="btn btn-outline-primary mr-5" (click)="addNew();"><i class="bi bi-plus-lg plus"></i>Add new</button>
        </div>
        <div class="right">
            <button type="button" class="btn btn-outline-primary mr-5" (click)="edit()">Edit</button>
            <button type="button" class="btn btn-outline-primary mr-5" (click)="delete()">Delete</button>
        </div>
    </div>
  </div>
  <div class="card card-body mt-3 card-main-content">
    <div>
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th></th>
              <th class="text-center server-name-th" scope="col">Server Name</th>
              <th class="text-center" scope="col">URL</th>
              <th class="text-center" scope="col">Status</th>
              <th class="text-center" scope="col">Created User</th>
              <th class="text-center" scope="col">Updated User</th>
              <th class="text-center" scope="col">Created At</th>
              <th class="text-center" scope="col">Updated At</th>
              <th class="text-center" style="width: 190px;" scope="col">Test Connection</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let doc of datasources" (dblclick)="dbclickToEdit(doc)">
              <td class="text-center checkbox-item" (click)="selectItem($event, doc.id)">
                <input [checked]="doc.checked" type="checkbox" />
              </td>
              <td class="server-name">{{ doc.serverName }}</td>
              <td class="url">{{ doc.url }}</td>
              <td class="text-center">
                <span *ngIf="doc.status === 'ACTIVE'" class="badge bg-info">{{doc.status}}</span>
                <span *ngIf="doc.status === 'IN_USE'" class="badge bg-success">{{doc.status}}</span>
                <span *ngIf="doc.status === 'INACTIVE'" class="badge bg-secondary">{{doc.status}}</span>
                <span *ngIf="doc.status === 'DISCONNECTED'" class="badge bg-warning">{{doc.status}}</span>
                <span *ngIf="doc.status === 'PENDING'" class="badge bg-dark">{{doc.status}}</span>
              </td>
              <td class="url">{{ doc.createdBy }}</td>
              <td class="url">{{ doc.updatedBy }}</td>
              <td class="url">{{ doc.createdAt | date: 'yyyy.MM.dd / HH:mm' }}</td>
              <td class="url">{{ doc.updatedAt | date: 'yyyy.MM.dd / HH:mm' }}</td>
              <td class="text-center"><button type="button" [disabled]="doc.testing" class="btn btn-outline-primary test-connection" (click)="testConnection($event, doc)">
                <span [class.fa-spinner]="doc.testing" class="fa fa-spin mr-2"></span>
                Test Connection</button></td>
            </tr>
          </tbody>
        </table>
        <app-pavigation [totalPage]="totalPage" (onChangePage)="handleChangePage($event)"
                        (onChangePageSize)="handleChangePageSize($event)"></app-pavigation>
    </div>
  </div>
</div>
